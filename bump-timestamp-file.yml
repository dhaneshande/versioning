---
platform: linux

image_resource:
  type: docker-image
  source: { repository: concourse/bosh-cli }

inputs:
  - name: resource-tutorial

run:
  path: bash
  args:
    - -e
    - -c
    - |
      ls -l
      pwd
      ls -R
      cd resource-tutorial
      cat package.json
      awk '/version/{gsub(/("|",)/,"",$2);print $2};' package.json
      PACKAGE_VERSION=$(cat package.json \
      | grep version \
      | head -1 \
      | awk -F: '{ print $2 }' \
      | sed 's/[",]//g' \
      | tr -d '[[:space:]]')
      echo $ PACKAGE_VERSION
      git tag $PACKAGE_VERSION
      git push --tags
      git config --global user.email "dande@miraclesoft.com"
      git config --global user.name "dhaneshande"
