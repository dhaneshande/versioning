---
platform: linux

image_resource:
  type: docker-image
  source: { repository: concourse/bosh-cli }

inputs:
  - name: resource-tutorial
  - name: resource-gist

outputs:
  - name: updated-gist

run:
  path: bash
  args:
    - -e
    - -c
    - |
      ls -l
      set -o pipefail
      chmod +x resource-tutorial/bump-timestamp-file.sh
      pwd
      ls -R
      PACKAGE_VERSION=$(cat package.json \
      | grep version \
      | head -1 \
      | awk -F: '{ print $2 }' \
      | sed 's/[",]//g' \
      | tr -d '[[:space:]]')
      echo $ PACKAGE_VERSION
